---
interface Props {
  name: string;
  type: string;
  content: string;
  img?: string;
  initial?: string;
  // Limitamos los colores para asegurar que coincidan con tu tema
  color?: 'primary' | 'secondary' | 'accent' | 'neutral';
}

const { 
  name, 
  type, 
  content, 
  img, 
  initial, 
  color = 'neutral' // Color por defecto si no se pasa nada
} = Astro.props;

// Mapa de estilos para evitar problemas de purgado de Tailwind
// Esto asegura que las clases existan en el CSS final
const styles = {
  primary: {
    bg: "bg-primary-500/20",
    border: "border-primary-500/30",
    text: "text-primary-400"
  },
  secondary: {
    bg: "bg-secondary-500/20",
    border: "border-secondary-500/30",
    text: "text-secondary-400"
  },
  accent: {
    bg: "bg-accent-500/20",
    border: "border-accent-500/30",
    text: "text-accent-400"
  },
  neutral: {
    bg: "bg-neutral-800",
    border: "border-neutral-700",
    text: "text-neutral-400"
  }
};

const currentStyle = styles[color as keyof typeof styles] || styles.neutral;
---

<article class="bg-gradient-to-br from-neutral-900 to-neutral-800 border border-neutral-700 rounded-xl p-6 space-y-4 h-full">
  <div class="flex items-center gap-4">
    {img ? (
      <picture>
        <source srcset={`https://cdn.sanahuja.dev/sanahujadev/${img}/original.webp`} type="image/webp" />
        <img 
          src={`https://cdn.sanahuja.dev/sanahujadev/${img}/jpeg/${img}-360w.jpeg`}
          alt={`Avatar de ${name}`}
          class="w-12 h-12 rounded-full object-cover bg-neutral-800 border border-neutral-700"
          width="48"
          height="48"
          loading="lazy"
          decoding="async"
        />
      </picture>
    ) : (
      <div class={`w-12 h-12 rounded-full flex items-center justify-center border ${currentStyle.bg} ${currentStyle.border}`}>
        <span class={`font-bold text-xl ${currentStyle.text}`}>
          {initial || name.charAt(0)}
        </span>
      </div>
    )}
    
    <div>
      <h3 class="text-lg font-medium text-neutral-50">{name}</h3>
      <p class="text-sm text-neutral-400">{type}</p>
    </div>
  </div>
  
  <p class="text-neutral-300 leading-relaxed">
    {content}
  </p>
</article>