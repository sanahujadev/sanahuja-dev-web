---
// src/components/pages/LandingInformeDeVisibilidad.astro
import BaseLayout from '../../layouts/BaseLayout.astro';
import Badge from '../../components/ui/Badge.astro';
import Button from '../../components/ui/Button.astro';

// Iconos de la Orquesta (Existentes)
import BarChart from '../ui/icons/BarChart.astro';
import ArrowRight from '../ui/icons/ArrowRight.astro';

// Tipos y Datos
import type { InformeVisibilidadWebCopy } from '../../i18n/utils';

interface Props {
  copy: InformeVisibilidadWebCopy;
  alternateUrl: string;
  schema: Record<string, any>;
}

const { copy, alternateUrl, schema } = Astro.props;
const { copy: t, lang, metadata } = copy;

// --- ICONOS INLINE (Para los que no tenemos componente aún) ---
// Activity (Ritmo cardiaco)
const ActivityIcon = `<path stroke-linecap="round" stroke-linejoin="round" d="M22 12h-4l-3 9L9 3l-3 9H2" />`;
// HelpCircle (Interrogación)
const HelpCircleIcon = `<circle cx="12" cy="12" r="10" /><path stroke-linecap="round" stroke-linejoin="round" d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3" /><path stroke-linecap="round" stroke-linejoin="round" d="M12 17h.01" />`;
// ZapOff (Rayo tachado)
const ZapOffIcon = `<path stroke-linecap="round" stroke-linejoin="round" d="M13 2L3 14h8l-1 8 10-12h-8l1-8z" /><path stroke-linecap="round" stroke-linejoin="round" d="M3 3l18 18" />`;

---

<BaseLayout lang={lang as "es" | "en"} alternateUrl={alternateUrl}>
  <Fragment slot="head">
    <title>{metadata.title}</title>
    <meta name="description" content={metadata.description} />
  </Fragment>
  <script is:inline type="application/ld+json" set:html={JSON.stringify(schema)} slot="json-ld" />

  <main class="min-h-screen bg-background">
    
    <section id="hero" class="relative py-24 sm:py-32 overflow-hidden">
      <div class="absolute inset-0 bg-[radial-gradient(circle_at_top_left,rgba(99,102,241,0.15)_0%,transparent_50%)] pointer-events-none" aria-hidden="true"></div>
      
      <div class="relative max-w-7xl mx-auto px-6 lg:px-8">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
          
          <div>
            <Badge variant="v0_secondary" class="mb-6">
              <BarChart class="w-3 h-3 mr-1.5" />
              {t.hero.badge}
            </Badge>

            <h1 class="font-bold text-4xl sm:text-5xl lg:text-6xl tracking-tight text-balance mb-6">
              <span class="text-foreground">{t.hero.h1_part1}</span>
              <br />
              <span class="text-secondary-400">{t.hero.h1_part2}</span>
            </h1>

            <div class="text-lg sm:text-xl leading-relaxed text-muted-foreground mb-10 text-pretty">
               <p set:html={t.hero.h1_lead} />
            </div>

            <div class="flex flex-col sm:flex-row gap-4">
              <Button 
                href={t.hero.ctas.primary.url} 
                variant="secondary" 
                size="lg" 
                class="shadow-lg shadow-secondary-500/20 group"
              >
                {t.hero.ctas.primary.text}
                <ArrowRight class="ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform" />
              </Button>
              <Button 
                href={t.hero.ctas.secondary.url} 
                variant="outline" 
                size="lg"
                class="bg-neutral-900/50 border-neutral-700 text-neutral-50 hover:bg-neutral-800"
              >
                {t.hero.ctas.secondary.text}
              </Button>
            </div>
          </div>

          <div class="relative">
            <div class="absolute inset-0 bg-secondary-500/10 blur-3xl pointer-events-none" aria-hidden="true"></div>
            
            <div class="relative bg-gradient-to-br from-neutral-900 to-neutral-900/50 border border-secondary-500/20 rounded-2xl p-10">
              <div class="text-center mb-8">
                <div class="inline-block bg-secondary-500/10 rounded-2xl p-6 mb-4">
                    <svg class="w-16 h-16 text-secondary-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" aria-hidden="true" set:html={ActivityIcon} />
                </div>
                <h2 class="text-2xl font-bold text-foreground mb-2">{t.hero.heroVisual.title}</h2>
                <p class="text-muted-foreground">{t.hero.heroVisual.subtitle}</p>
              </div>

              <div class="space-y-4">
                {t.hero.heroVisual.stats.map((stat) => {
                    // Lógica simple para elegir icono basado en el label o posición (idealmente vendría del JSON)
                    // Mapeamos visualmente lo de V0 con los datos de Burro
                    let Icon = ActivityIcon; // Default
                    if (stat.icon === 'Search' || stat.label.includes('Rastreo')) Icon = `<circle cx="11" cy="11" r="8" /><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-4.35-4.35" />`; // Search Icon SVG string
                    if (stat.icon === 'Eye' || stat.label.includes('Visibilidad')) Icon = `<path stroke-linecap="round" stroke-linejoin="round" d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" /><circle cx="12" cy="12" r="3" />`; // Eye Icon SVG string

                    return (
                        <div class="bg-neutral-950/50 border border-border rounded-xl p-4 flex items-center gap-4">
                            <div class="bg-secondary-500/10 w-12 h-12 rounded-lg flex items-center justify-center flex-shrink-0">
                                <svg class="w-6 h-6 text-secondary-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" aria-hidden="true" set:html={Icon} />
                            </div>
                            <div>
                                <div class="text-sm text-muted-foreground">{stat.label}</div>
                                <div class="text-lg font-bold text-foreground">{stat.value}</div>
                            </div>
                        </div>
                    );
                })}
              </div>
            </div>
          </div>

        </div>
      </div>
    </section>

    <section id="symptoms" class="py-20 bg-neutral-900/30 border-y border-border">
      <div class="max-w-7xl mx-auto px-6 lg:px-8">
        <div class="text-center mb-12">
          <Badge variant="v0_primary" class="mb-6">
            {t.sections.symptoms.badge}
          </Badge>
          <h2 class="text-3xl sm:text-4xl font-semibold tracking-tight text-foreground text-balance mb-4">
            {t.sections.symptoms.title}
          </h2>
          <p class="text-lg text-muted-foreground max-w-3xl mx-auto text-pretty">
            {t.sections.symptoms.content}
          </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            {t.sections.symptoms.featureCards.map((card, idx) => {
                // Icon selection based on index/context from V0 design
                let IconSvg = HelpCircleIcon;
                if (idx === 1) IconSvg = ZapOffIcon;
                if (idx === 2) IconSvg = `<circle cx="11" cy="11" r="8" /><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-4.35-4.35" />`; // Search

                return (
                    <div class="bg-card/50 border border-border rounded-xl p-8 hover:border-secondary-500/30 transition-colors" data-symptom-card>
                        <div class="bg-secondary-500/10 w-14 h-14 rounded-xl flex items-center justify-center mb-6">
                             <svg class="w-7 h-7 text-secondary-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" aria-hidden="true" set:html={IconSvg} />
                        </div>
                        <h3 class="text-xl font-bold text-foreground mb-3">{card.title}</h3>
                        <p class="text-muted-foreground leading-relaxed">
                            {card.description}
                        </p>
                    </div>
                );
            })}
        </div>
      </div>
    </section>

    <section id="methodology" class="py-20">
      <div class="max-w-7xl mx-auto px-6 lg:px-8">
        <div class="text-center mb-12">
          <Badge variant="v0_accent" class="mb-6">
            {t.sections.methodology.badge}
          </Badge>
          <h2 class="text-3xl sm:text-4xl font-semibold tracking-tight text-foreground text-balance mb-4">
            {t.sections.methodology.title}
          </h2>
          <p class="text-lg text-muted-foreground max-w-3xl mx-auto text-pretty">
            {t.sections.methodology.content}
          </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            {t.sections.methodology.toolsGrid.map(tool => (
                <div class="bg-gradient-to-br from-neutral-900 to-neutral-900/50 border border-border rounded-xl p-6">
                    <div class="text-center">
                        <h3 class="text-2xl font-bold text-accent-400 mb-2">{tool.name}</h3>
                        <div class="text-sm text-muted-foreground">{tool.purpose}</div>
                    </div>
                </div>
            ))}
        </div>
      </div>
    </section>

    <section id="next-step" class="py-20 bg-neutral-900/30">
      <div class="max-w-4xl mx-auto px-6 lg:px-8">
        <div class="bg-gradient-to-br from-neutral-900 to-neutral-900/50 border border-primary-500/20 rounded-2xl p-10">
          <h2 class="text-2xl sm:text-3xl font-semibold text-foreground mb-4 text-balance">
            {t.sections.nextStep.title}
          </h2>
          <p class="text-lg text-muted-foreground mb-6 text-pretty">
            {t.sections.nextStep.content}
          </p>
          <Button 
            href={t.sections.nextStep.linkUrl} 
            variant="outline" 
            class="border-primary-500/30 hover:bg-primary-500/10 text-primary-400"
          >
            {t.sections.nextStep.linkText}
            <ArrowRight class="ml-2 w-4 h-4" />
          </Button>
        </div>
      </div>
    </section>

    <section id="cta-final" class="py-24 sm:py-32">
      <div class="max-w-4xl mx-auto px-6 lg:px-8 text-center">
        <h2 class="text-3xl sm:text-4xl font-semibold tracking-tight text-foreground text-balance mb-6">
          {t.sections.ctaFinal.title}
        </h2>
        <p class="text-lg sm:text-xl leading-relaxed text-muted-foreground max-w-2xl mx-auto mb-10 text-pretty">
          {t.sections.ctaFinal.content}
        </p>
        <Button 
            href={t.sections.ctaFinal.url} 
            variant="secondary" 
            size="lg"
            class="shadow-lg shadow-secondary-500/20 group"
        >
          {t.sections.ctaFinal.cta}
          <ArrowRight class="ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform" />
        </Button>
        <p class="mt-8 text-sm text-muted-foreground">{t.sections.ctaFinal.subtext}</p>
      </div>
    </section>

  </main>
</BaseLayout>