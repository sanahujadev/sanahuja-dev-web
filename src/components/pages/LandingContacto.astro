---
// src/components/pages/LandingContacto.astro
import BaseLayout from '../../layouts/BaseLayout.astro';
import Button from '../../components/ui/Button.astro';
import Badge from '../../components/ui/Badge.astro';

import type { ContactoCopy } from '../../i18n/utils';

interface Props {
  copy: ContactoCopy;
  alternateUrl: string;
  schema: Record<string, any>;
}

const { copy, alternateUrl, schema } = Astro.props;
const { copy: t, lang, metadata } = copy;
const handleSubmit = (e: SubmitEvent) => { /* tu lógica */ };
const toggleStep = (step: number) => { /* tu lógica */ };
---

<BaseLayout lang={lang as "es" | "en"} alternateUrl={alternateUrl}>
  <script is:inline type="application/ld+json" set:html={JSON.stringify(schema)} slot="json-ld" />
  <Fragment slot="head">
    <title>{metadata.title}</title>
    <meta name="description" content={metadata.description} />
  </Fragment>
<main>
  {/* Hero */}
  <section id="hero">
    <h1>
      Vamos a materializar tu idea.
    </h1>
    <p>Sin intermediarios. De humano a humano.</p>
    <p>
      Rellena lo básico para contactar. Si buscas iniciar un proyecto, despliega los detalles para que pueda
      analizar tu caso.
    </p>
  </section>

  {/* Form */}
  <form id="contact-form" onsubmit={handleSubmit}>
    {/* Step 1: Identidad */}
    <section id="step_1_identity">
      <button
        type="button"
        onclick={() => toggleStep(1)}
      >
        <div>
          <div>
            01
          </div>
          <h3>Datos de Contacto</h3>
        </div>
        <svg
          class={openStep === 1 ? "rotate-180" : ""}
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width={2} d="M19 9l-7 7-7-7" />
        </svg>
      </button>

      {openStep === 1 && (
        <div>
          <div>
            <label>
              Nombre <span>*</span>
            </label>
            <input
              name="name"
              type="text"
              required
              value={formData.name}
              oninput={(e) => setFormData({ ...formData, name: e.currentTarget.value })}
              placeholder="Tu nombre completo"
            />
          </div>

          <div>
            <label>
              Email <span>*</span>
            </label>
            <input
              name="email"
              type="email"
              required
              value={formData.email}
              oninput={(e) => setFormData({ ...formData, email: e.currentTarget.value })}
              placeholder="tu@email.com"
            />
          </div>

          <div>
            <label>
              Mensaje / Consulta <span>*</span>
            </label>
            <textarea
              name="message_basic"
              required
              rows="4"
              value={formData.message_basic}
              oninput={(e) => setFormData({ ...formData, message_basic: e.currentTarget.value })}
              placeholder="Cuéntame qué necesitas..."
            />
          </div>

          {/* Accordion Trigger Text */}
          <div>
            <p>
              ¿Buscas agendar una reunión de trabajo? Para saber si puedo ayudarte, necesito un poco de contexto
              previo
            </p>
            <button
              type="button"
              onclick={() => toggleStep(2)}
            >
              <span>Desplegar detalles del proyecto</span>
              <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width={2} d="M9 5l7 7-7 7" />
              </svg>
            </button>
          </div>
        </div>
      )}
    </section>

    {/* Step 2: Alcance @TODO Revisar no hay inputs  */}
    <section id="step_2_scope">
      <Button
        type="button"
        onclick={() => toggleStep(2)}
      >
        <div>
          <div>
            02
          </div>
          <h3>Tipo de Proyecto y Tecnología</h3>
        </div>
        <svg
          class={openStep === 2 ? "rotate-180" : ""}
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width={2} d="M19 9l-7 7-7-7" />
        </svg>
      </Button>

      {openStep === 2 && (
        <div>
          {/* Project Type Cards */}
          <div>
            <label>¿Qué servicio te interesa?</label>
            <div>
              {projectTypes.map((type) => (
                <button
                  key={type.value}
                  type="button"
                  onclick={() => setSelectedProjectType(type.value)}
                >
                  <div>
                    <div>
                      {type.icon === "Layout" && (
                        <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width={2}
                            d="M4 5a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 16a1 1 0 011-1h4a1 1 0 011 1v3a1 1 0 01-1 1H5a1 1 0 01-1-1v-3zM14 16a1 1 0 011-1h4a1 1 0 011 1v3a1 1 0 01-1 1h-4a1 1 0 01-1-1v-3z"
                          />
                        </svg>
                      )}
                      {type.icon === "Package" && (
                        <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width={2}
                            d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"
                          />
                        </svg>
                      )}
                      {type.icon === "Shield" && (
                        <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width={2}
                            d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"
                          />
                        </svg>
                      )}
                      {type.icon === "HelpCircle" && (
                        <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width={2}
                            d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                          />
                        </svg>
                      )}
                    </div>
                    <span>{type.label}</span>
                  </div>
                </button>
              ))}
            </div>
          </div>

          {/* Tech Status Pills */}
          <div>
            <label>¿Tienes ya Dominio o Hosting?</label>
            <div>
              {techStatusOptions.map((option) => (
                <button
                  key={option.value}
                  type="button"
                  onclick={() => setSelectedTechStatus(option.value)}
                >
                  {option.label}
                </button>
              ))}
            </div>
          </div>

          {/* Accordion Trigger Text */}
          <div>
            <p>
              Para darte una respuesta honesta sobre la viabilidad (y no hacerte perder tiempo), definamos el
              alcance
            </p>
            <button
              type="button"
              onclick={() => toggleStep(3)}
            >
              <span>Definir viabilidad y objetivos</span>
              <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width={2} d="M9 5l7 7-7 7" />
              </svg>
            </button>
          </div>
        </div>
      )}
    </section>

    {/* Step 3: Viabilidad */}
    <section id="step_3_viability">
      <Button
        type="button"
        onclick={() => toggleStep(3)}
      >
        <div>
          <div>
            03
          </div>
          <h3>Viabilidad y Objetivos</h3>
        </div>
        <svg
          class={openStep === 3 ? "rotate-180" : ""}
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width={2} d="M19 9l-7 7-7-7" />
        </svg>
      </Button>

      {openStep === 3 && (
        <div>
          <div>
            <label>¿Cuál es el objetivo principal de este proyecto?</label>
            <input
              type="text"
              name="goal"
              value={formData.goal}
              oninput={(e) => setFormData({ ...formData, goal: e.currentTarget.value })}
              placeholder="Ej: Vender más, mejorar imagen, automatizar citas..."
            />
          </div>

          <div>
            <label>¿Para cuándo lo necesitas?</label>
            <select
              name="timeline"
              value={formData.timeline}
              onchange={(e) => setFormData({ ...formData, timeline: e.currentTarget.value })}
            >
              <option value="">Selecciona un plazo</option>
              <option value="urgent">Urgente (Lo antes posible)</option>
              <option value="standard">Estándar (Próximo mes)</option>
              <option value="flexible">Flexible (Sin prisa)</option>
            </select>
          </div>

          <div>
            <label>Rango de Inversión Disponible</label>
            <p>
              Saber esto me permite decirte qué soluciones encajan y cuáles no.
            </p>
            <select
              name="budget_range"
              value={formData.budget_range}
              onchange={(e) => setFormData({ ...formData, budget_range: e.currentTarget.value })}
            >
              <option value="">Selecciona un rango</option>
              <option value="low">Económico (&lt; 1.000€)</option>
              <option value="medium">Profesional (1.000€ - 3.000€)</option>
              <option value="high">Premium / A Medida (+3.000€)</option>
            </select>
          </div>
        </div>
      )}
    </section>

    {/* Ansiolítico Section */}
    <section>
      <div>
        <div>
          <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width={2}
              d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
            />
          </svg>
        </div>
        <div>
          <p>
            No te preocupes, esto no es un examen. Simplemente analizo estos datos para preparar nuestra primera
            conversación.
          </p>
          <Button href="/es/politica-de-privacidad" target="_self">
            <span>Ver Política de Privacidad</span>
            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width={2} d="M9 5l7 7-7 7" />
            </svg>
          </Button>
        </div>
      </div>
    </section>

    {/* Submit Button */}
    <section>
      <Button type="submit">
        {openStep === 3 ? "Solicitar Estudio del Proyecto" : "Enviar Mensaje Básico"}
      </Button>
    </section>
  </form>
</main>
 
</BaseLayout>