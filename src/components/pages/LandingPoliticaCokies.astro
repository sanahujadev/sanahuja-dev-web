---
// src/components/pages/LandingPoliticaCokies.astro
import BaseLayout from "../../layouts/BaseLayout.astro";
import InformationCircle from "../ui/icons/InformationCircle.astro";

// Tipos
import type { PoliticaCookiesCopy } from "../../i18n/utils";

interface Props {
  copy: PoliticaCookiesCopy;
  alternateUrl: string;
  schema: Record<string, any>;
}

const { copy, alternateUrl, schema } = Astro.props;
const { copy: t, lang, metadata } = copy;
---

<BaseLayout lang={lang as "es" | "en"} alternateUrl={alternateUrl}>
  <script is:inline type="application/ld+json" set:html={JSON.stringify(schema)} slot="json-ld" />
  <Fragment slot="head">
    <title>{metadata.title}</title>
    <meta name="description" content={metadata.description} />
    <meta name="robots" content="noindex, follow" />
  </Fragment>

  <main class="min-h-screen bg-background">
    
    <section class="pt-32 pb-12 px-6 border-b border-border">
      <div class="max-w-4xl mx-auto">
        <h1 class="text-4xl lg:text-5xl font-bold text-foreground mb-4">{t.hero.title}</h1>
        <p class="text-muted-foreground">{t.hero.lastUpdated}</p>
      </div>
    </section>

    <section class="py-12 px-6">
      <div class="max-w-4xl mx-auto">
        <p class="text-xl text-neutral-300 leading-relaxed" set:html={t.intro} />
      </div>
    </section>

    <section class="pb-12 px-6">
      <div class="max-w-4xl mx-auto space-y-12">
        
        {t.sections.map((section, index) => (
          <div>
            <h2 class="text-2xl font-bold text-foreground mb-4 flex items-center gap-3">
              <span class="text-accent-500">{index + 1}.</span>
              {section.title}
            </h2>
            
            {/* Renderizado condicional: Si tiene 'types' (Sección 2) o 'content' simple */}
            {section.types ? (
              <div class="space-y-6">
                {section.types.map(type => (
                  <div class={`rounded-xl p-6 border ${type.name.includes('Analítica') ? 'bg-neutral-900 border-accent-500/30' : 'bg-neutral-900 border-border'}`}>
                    <h3 class="text-xl font-bold text-foreground mb-3">{type.name}</h3>
                    <p class="text-muted-foreground leading-relaxed" set:html={type.description} />
                  </div>
                ))}
              </div>
            ) : (
              <div class="text-muted-foreground leading-relaxed space-y-4">
                <p set:html={section.content} />
              </div>
            )}
          </div>
        ))}

        {/* Visual Guide (Bloque estático al final del contenido) */}
        <div class="bg-gradient-to-br from-accent-950/30 to-neutral-900 border border-accent-500/30 rounded-xl p-8 mt-12">
            <div class="flex items-start gap-4">
              <div class="w-12 h-12 bg-accent-500/10 rounded-lg flex items-center justify-center flex-shrink-0">
                <InformationCircle class="w-6 h-6 text-accent-400" />
              </div>
              <div>
                <h3 class="text-xl font-bold text-foreground mb-2">Control Total</h3>
                <p class="text-muted-foreground">
                  Tú decides qué cookies aceptar. Sin tu consentimiento explícito, solo usamos las estrictamente
                  necesarias para el funcionamiento básico de la web.
                </p>
              </div>
            </div>
        </div>

      </div>
    </section>

    <section class="py-12 px-6 bg-neutral-900/50 border-t border-border">
        <div class="max-w-4xl mx-auto text-center">
          <p class="text-muted-foreground mb-4">{t.footer.teaser}</p>
          <a href={`mailto:${t.footer.email}`} class="text-accent-400 hover:text-primary-400 font-semibold transition-colors">
            {t.footer.email}
          </a>
        </div>
    </section>

  </main>
</BaseLayout>