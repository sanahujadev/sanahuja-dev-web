---
// src/components/pages/LandingPackTodoEnUno.astro
import BaseLayout from '../../layouts/BaseLayout.astro';
import Button from '../ui/Button.astro';
import SectionHeader from '../../components/ui/SectionHeader.astro';
import Sparkles from '../ui/icons/Sparkles.astro';
import Check from '../ui/icons/Check.astro';
import Key from '../ui/icons/Key.astro';
import Tag from '../ui/icons/Tag.astro';
import ShieldCheck from '../ui/icons/ShieldCheck.astro';
import ArrowRightStandard from '../ui/icons/ArrowRightStandard.astro';
import BarChart from '../ui/icons/BarChart.astro';
import Star from '../ui/icons/Star.astro';
import Feather from '../ui/icons/Feather.astro';
import Phone from '../ui/icons/Phone.astro';
import AlertTriangle from '../ui/icons/AlertTriangle.astro';
import Clock from '../ui/icons/Clock.astro';
import FileText from '../ui/icons/FileText.astro';
import type { PackTodoEnUnoCopy } from '../../i18n/utils';

const solutionIconMap: Record<string, any> = {
  BarChart,
  Star,
  Feather,
  Phone,
};

interface Props {
  copy: PackTodoEnUnoCopy;
  alternateUrl: string;
  schema: Record<string, any>;
}

const { copy, alternateUrl, schema } = Astro.props;

const {
    copy: t,
    lang,
    metadata
} = copy;
---

<BaseLayout lang={lang as "es" | "en"} alternateUrl={alternateUrl}>
  <script type="application/ld+json" set:html={JSON.stringify(schema)} slot="json-ld" />
  <Fragment slot="head">
    <title>{metadata.title}</title>
    <meta name="description" content={metadata.description} />
  </Fragment>
  <main>
  {/* Hero Section */}
  <section id="hero">
    {/* Background Pattern */}
    <div style={{ opacity: "20%" }}>
      <div
        style={{
          backgroundImage: "radial-gradient(circle at 2px 2px, rgb(20 184 166 / 0.15) 1px, transparent 0)",
          backgroundSize: "40px 40px",
        }}
      ></div>
    </div>

    <div>
      <div>
        {/* Badge */}
        <div>
          <Sparkles class="w-5 h-5" />
          <span>{t.hero.badge}</span>
        </div>

        {/* Headline */}
        <h1>
          <span>{t.hero.h1_part1}</span>
          <br />
          <span>{t.hero.h1_part2}</span>
        </h1>

        <p>
          {t.hero.h1_lead}
        </p>

        <div>
          <Button href={t.hero.ctas.primary.url}>
            {t.hero.ctas.primary.text}
          </Button>
          <a href={t.hero.ctas.secondary.url}>
            {t.hero.ctas.secondary.text}
          </a>
        </div>

        {/* Hero Visual */}
        <div>
          {t.hero.heroVisual.stats.map((stat, index) => {
            const Icon = [Key, Tag, ShieldCheck][index];
            return (
              <div>
                <div>
                  <Icon class="w-7 h-7 text-secondary-400" />
                </div>
                <h3>
                    <span>{stat.label}:</span>
                    <span>{stat.value}</span>
                </h3>
                <p>
                  {stat.description}
                </p>
              </div>
            )
          })}
        </div>

      </div>
    </div>
  </section>

  {/* Pain Points Section */}
  <section id="fragmentacion">
    <div>
      <SectionHeader
        badgeVariant="v0_primary"
        badgeIcon={AlertTriangle}
        badgeIconClass="text-primary-400"
        badgeText={t.sections.painPoints.badge}
        title={t.sections.painPoints.title}
        content={t.sections.painPoints.content}
      />
      <div>
        {
          t.sections.painPoints.list.map((point, index) => {
            const Icon = [AlertTriangle, Clock, FileText][index];
            return (<div>
                <div>
                <Icon />
                </div>
                <p>{point}</p>
            </div>)
          })
        }   
      </div>
    </div>
  </section>
  
  {/* Scope Section */}
  <section id="todo-list">
    <div>
      <SectionHeader
      badgeVariant="v0_accent"
      badgeIcon={Sparkles}
      badgeIconClass="text-accent-400"
      badgeText={t.sections.solution.badge}
      title={t.sections.solution.title}
      content={t.sections.solution.content}
      />
      <div>
        {t.sections.solution.features.map(feature => {
          const Icon = solutionIconMap[feature.icon];
          return (
            <div>
              <div>
                <Icon class="w-6 h-6 text-primary-400" />
              </div>
              <h3>{feature.title}</h3>
              <p>
                {feature.description}
              </p>
            </div>
          )
        })}
      </div>
    </div>
  </section>
  
  {/* Workflow Section - Placeholder for CTA target */}
  <section id="workflow" class="py-20 bg-neutral-900/30">
    <div>
      <SectionHeader
        badgeVariant="v0_secondary"
        badgeIcon={Clock}
        badgeIconClass="text-secondary-400"
        badgeText={t.sections.workflow.badge}
        title={t.sections.workflow.title}
      />
      <div>
        {/* Onboarding Column */}
        <div>
          <h3>{t.sections.workflow.onboarding.title}</h3>
          <ol>
            {t.sections.workflow.onboarding.steps.map((step, index) => (
              <li>
                <div>{index + 1}</div>
                <span>{step}</span>
              </li>
            ))}
          </ol>
        </div>
        {/* Monthly Cycle Column */}
        <div>
          <h3>{t.sections.workflow.monthlyCycle.title}</h3>
          <ul>
            {t.sections.workflow.monthlyCycle.steps.map((step) => (
              <li>
                <Check/>
                <span>{step}</span>
              </li>
            ))}
          </ul>
        </div>
      </div>
    </div>
  </section>

  {/* Pricing Section */}
  <section id="pricing" class="py-20 bg-neutral-900/30">
    <div class="max-w-xl mx-auto px-6 lg:px-8 text-center">
        <SectionHeader
            badgeVariant="v0_accent"
            badgeIcon={Tag}
            badgeIconClass="text-accent-400"
            badgeText={t.sections.pricing.badge}
            title={t.sections.pricing.title}
            content={t.sections.pricing.content}
        />
        <div class="mt-8 text-5xl font-bold text-primary-400">
            {t.sections.pricing.price}
        </div>
        <ul class="space-y-2 mt-8 text-muted-foreground">
            {t.sections.pricing.features.map(feature => (
                <li class="flex items-center justify-center gap-2">
                    <Check class="w-5 h-5 text-accent-400" />
                    <span>{feature}</span>
                </li>
            ))}
        </ul>
        <Button href={t.sections.pricing.ctaUrl} class="mt-10" variant="primary">
            {t.sections.pricing.cta}
            <ArrowRightStandard class="w-5 h-5 ml-2" />
        </Button>
    </div>
  </section>
  
  {/* Downsell Section */}
  <section id="downsell" class="py-20">
    <div class="max-w-4xl mx-auto px-6 lg:px-8">
        <div class="border border-border rounded-2xl p-8 grid grid-cols-1 md:grid-cols-3 gap-8 items-center">
            <div class="md:col-span-2">
                <h3 class="text-2xl font-bold text-foreground">{t.sections.downsell.title}</h3>
                <p class="text-muted-foreground mt-2">{t.sections.downsell.content}</p>
                <div class="mt-4 border-l-2 border-accent-400 pl-4">
                    <p class="font-semibold text-foreground">{t.sections.downsell.offer.name}</p>
                    <p class="text-sm text-muted-foreground">{t.sections.downsell.offer.description}</p>
                </div>
            </div>
            <div class="md:col-span-1">
                <Button href={t.sections.downsell.offer.url} variant="outline" class="w-full">
                    {t.sections.downsell.cta}
                    <ArrowRightStandard class="w-5 h-5 ml-2" />
                </Button>
            </div>
        </div>
    </div>
  </section>

  {/* CTA Final */}
  <section id="cta-final">
    <div>
      <div>
        <h2>{t.sections.ctaFinal.title}</h2>
        <p>{t.sections.ctaFinal.content}</p>
        <Button href={t.hero.ctas.primary.url}>
          {t.sections.ctaFinal.cta}
          <ArrowRightStandard class="w-5 h-5" />
        </Button>
        <p>{t.sections.ctaFinal.subtext}</p>
      </div>
    </div>
  </section>
</main>
</BaseLayout>