---
// src/components/pages/LandingServicios.astro
import BaseLayout from '../../layouts/BaseLayout.astro';
import Button from '../../components/ui/Button.astro';
import Badge from '../../components/ui/Badge.astro';

// Iconos de la Orquesta
import Shield from '../../components/ui/icons/Shield.astro';
import Star from '../../components/ui/icons/Star.astro';
import Clock from '../../components/ui/icons/Clock.astro';
import BarChart from '../../components/ui/icons/BarChart.astro';
import ArrowRight from '../../components/ui/icons/ArrowRight.astro';
import LayoutIcon from '../../components/ui/icons/LayoutIcon.astro'; // Use LayoutIcon from LayoutIcon.astro
import Network from '../../components/ui/icons/Network.astro';

// Tipos
import type { ServicesCopy } from '../../i18n/utils';

interface Props {
  copy: ServicesCopy;
  alternateUrl: string;
  schema: Record<string, any>;
}

const { copy, alternateUrl, schema } = Astro.props;
const { copy: t, lang, metadata } = copy;

// Mapeo de iconos para el Grid
const iconMap: Record<string, any> = {
  Layout: LayoutIcon,
  Shield: Shield,
  Star: Star,
  Clock: Clock,
  BarChart: BarChart,
  Network: Network // Add Network to the map
};

// Estilos cÃ­clicos para las tarjetas
const serviceStyles = [
    {
        badgeColor: "bg-primary-500/10 text-primary-400 border-primary-500/20",
        borderColor: "hover:border-primary-500/30",
        iconColor: "group-hover:text-primary-400"
    },
    {
        badgeColor: "bg-accent-500/10 text-accent-400 border-accent-500/20",
        borderColor: "hover:border-accent-500/30",
        iconColor: "group-hover:text-accent-400"
    },
    {
        badgeColor: "bg-secondary-500/10 text-secondary-400 border-secondary-500/20",
        borderColor: "hover:border-secondary-500/30",
        iconColor: "group-hover:text-secondary-400"
    },
    {
        badgeColor: "bg-primary-500/10 text-primary-400 border-primary-500/20",
        borderColor: "hover:border-primary-500/30",
        iconColor: "group-hover:text-primary-400"
    },
    {
        badgeColor: "bg-secondary-500/10 text-secondary-400 border-secondary-500/20",
        borderColor: "hover:border-secondary-500/30",
        iconColor: "group-hover:text-secondary-400"
    }
];

const services = t.sections.servicesGrid.cards.map((service, index) => {
    const style = serviceStyles[index % serviceStyles.length];
    return {
        ...service,
        IconComponent: iconMap[service.icon],
        ...style
    }
});
---

<BaseLayout lang={lang as "es" | "en"} alternateUrl={alternateUrl}>
  <script is:inline type="application/ld+json" set:html={JSON.stringify(schema)} slot="json-ld" />
  <Fragment slot="head">
    <title>{metadata.title}</title>
    <meta name="description" content={metadata.description} />
  </Fragment>

  <main class="min-h-screen bg-background">
    
    <section id="hero" class="relative py-24 sm:py-32 overflow-hidden">
      <div class="absolute inset-0 bg-[radial-gradient(circle_at_center,rgba(255,111,0,0.15)_0%,transparent_50%)] pointer-events-none" aria-hidden="true"></div>
      
      <div class="relative max-w-7xl mx-auto px-6 lg:px-8">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
          
          <div>
            <Badge variant="v0_accent" class="mb-6">
              <Network class="w-3 h-3 mr-1.5 text-accent-400" />
              {t.sections.intro.badge}
            </Badge>

            <h1 class="font-bold text-4xl sm:text-5xl lg:text-6xl tracking-tight text-balance mb-6">
              <span class="text-foreground">{t.hero.h1_part1} </span>
              <span class="text-primary-400">{t.hero.h1_part2}</span>
            </h1>

            <p class="text-lg sm:text-xl leading-relaxed text-muted-foreground mb-10 text-pretty" set:html={t.hero.h1_lead}/>
               
            <Button 
                href={t.sections.ctaFinal.url} 
                variant="primary" 
                class="shadow-lg shadow-primary-500/20 group"
            >
               Empezar mi Proyecto
              <ArrowRight class="ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform" />
            </Button>
          </div>

          <div class="relative">
            <div class="absolute inset-0 bg-primary-500/10 blur-3xl pointer-events-none" aria-hidden="true"></div>
            <div class="relative bg-gradient-to-br from-neutral-900 to-neutral-900/50 border border-primary-500/20 rounded-2xl p-12">
              <div class="text-center mb-6">
                <h2 class="text-2xl font-bold text-foreground mb-2">{t.hero.heroVisual.title}</h2>
                <p class="text-muted-foreground">{t.hero.heroVisual.subtitle}</p>
              </div>

              <div class="relative aspect-square max-w-sm mx-auto">
                <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-10">
                  <div class="bg-primary-500 w-20 h-20 rounded-full flex items-center justify-center shadow-lg shadow-primary-500/50 border-4 border-neutral-900">
                    <span class="text-neutral-950 font-bold text-sm">{t.hero.heroVisual.nodeCore}</span>
                  </div>
                </div>

                <div class="absolute top-0 left-1/2 -translate-x-1/2">
                  <div class="bg-neutral-800 border border-neutral-700 w-16 h-16 rounded-full flex items-center justify-center shadow-lg">
                    <LayoutIcon class="w-6 h-6 text-primary-400" />
                  </div>
                </div>
                <div class="absolute bottom-0 left-1/2 -translate-x-1/2">
                  <div class="bg-neutral-800 border border-neutral-700 w-16 h-16 rounded-full flex items-center justify-center shadow-lg">
                    <Shield class="w-6 h-6 text-accent-400" />
                  </div>
                </div>
                <div class="absolute top-1/2 left-0 -translate-y-1/2">
                  <div class="bg-neutral-800 border border-neutral-700 w-16 h-16 rounded-full flex items-center justify-center shadow-lg">
                    <Star class="w-6 h-6 text-secondary-400" />
                  </div>
                </div>
                <div class="absolute top-1/2 right-0 -translate-y-1/2">
                  <div class="bg-neutral-800 border border-neutral-700 w-16 h-16 rounded-full flex items-center justify-center shadow-lg">
                    <Clock class="w-6 h-6 text-primary-400" />
                  </div>
                </div>

                <svg class="absolute inset-0 w-full h-full pointer-events-none">
                  <line x1="50%" y1="50%" x2="50%" y2="15%" stroke="currentColor" stroke-width="1" class="text-neutral-700" stroke-dasharray="4 4" />
                  <line x1="50%" y1="50%" x2="50%" y2="85%" stroke="currentColor" stroke-width="1" class="text-neutral-700" stroke-dasharray="4 4" />
                  <line x1="50%" y1="50%" x2="15%" y2="50%" stroke="currentColor" stroke-width="1" class="text-neutral-700" stroke-dasharray="4 4" />
                  <line x1="50%" y1="50%" x2="85%" y2="50%" stroke="currentColor" stroke-width="1" class="text-neutral-700" stroke-dasharray="4 4" />
                </svg>
              </div>
            </div>
          </div>

        </div>
      </div>
    </section>

    <section id="intro" class="py-20 bg-neutral-900/30 border-y border-border">
      <div class="max-w-4xl mx-auto px-6 lg:px-8 text-center">
        <h2 class="text-3xl sm:text-4xl font-semibold tracking-tight text-foreground text-balance mb-6">
          {t.sections.intro.title}
        </h2>
        <p class="text-lg text-muted-foreground text-pretty">
          {t.sections.intro.content}
        </p>
      </div>
    </section>

    <section id="servicios" class="py-20">
      <div class="max-w-7xl mx-auto px-6 lg:px-8">
        <div class="text-center mb-12">
          <h2 class="text-3xl sm:text-4xl font-semibold tracking-tight text-foreground text-balance">
            {t.sections.servicesGrid.title}
          </h2>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {services.map((service) => {
            const Icon = service.IconComponent;
            return (
              <div data-service-card>
              <a
                href={service.url}
                class={`group block bg-neutral-900 border border-border rounded-2xl p-8 transition-all ${service.borderColor} hover:-translate-y-1`}
              >
                <div class="flex items-start justify-between mb-6">
                  <div class="bg-neutral-800/50 w-14 h-14 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform">
                    <Icon class={`w-7 h-7 text-neutral-400 ${service.iconColor} transition-colors`} />
                  </div>
                  <Badge class={service.badgeColor}>
                    {service.badge}
                  </Badge>
                </div>
                
                <h2 class={`text-xl font-bold text-foreground mb-3 ${service.iconColor} transition-colors`}>
                  {service.title}
                </h2>
                
                <p class="text-muted-foreground leading-relaxed mb-6">
                  {service.description}
                </p>
                
                <div class={`flex items-center text-sm font-medium text-text-muted-foreground ${service.iconColor} transition-colors`}>
                  {service.cta}
                  <ArrowRight class="ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform" />
                </div>
              </a>
              </div>
            )
          })}
        </div>
      </div>
    </section>

    <section id="cta-final" class="py-24 sm:py-32 bg-gradient-to-b from-neutral-900/30 to-neutral-900">
      <div class="max-w-4xl mx-auto px-6 lg:px-8 text-center">
        <h2 class="text-3xl sm:text-4xl font-semibold tracking-tight text-foreground text-balance mb-6">
          {t.sections.ctaFinal.title}
        </h2>
        <p class="text-lg sm:text-xl leading-relaxed text-muted-foreground max-w-2xl mx-auto mb-10 text-pretty">
          {t.sections.ctaFinal.content}
        </p>
        <Button
          href={t.sections.ctaFinal.url}
          size="lg"
          variant="primary"
          class="shadow-lg shadow-primary-500/20 group"
        >
          {t.sections.ctaFinal.cta}
          <ArrowRight class="ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform" />
        </Button>
        <p class="mt-8 text-sm text-muted-foreground">{t.sections.ctaFinal.subtext}</p>
      </div>
    </section>

  </main>
</BaseLayout>