---
// src/pages/[lang]/blog/[slug].astro
import { getCollection } from "astro:content";
import BlogPostLayout from "../../../layouts/BlogPost.astro";

export async function getStaticPaths() {
    const posts = await getCollection("blog");

    // Generaremos rutas basadas en el idioma definido en el frontmatter del post
    const paths: any[] = [];

    for (const post of posts) {
        // Obtenemos el idioma del frontmatter (definido en config.ts)
        const lang = post.data.lang || "es";
        const slug = post.slug;

        paths.push({
            params: { lang, slug },
            props: { post },
        });
    }

    return paths;
}

const { post } = Astro.props;
const { Content } = await post.render();
---

<BlogPostLayout frontmatter={post.data}>
    <Content />
</BlogPostLayout>
